# ุฏููู ุฅุนุฏุงุฏ ูุธุงู ุงููุตุงุฏูุฉ ุนุจุฑ ุงูุฅูุชุฑูุช

## ูุธุฑุฉ ุนุงูุฉ

ุชู ุฅูุดุงุก ูุธุงู ูุตุงุฏูุฉ ูุชูุงูู ูุนูู ุนุจุฑ ุงูุฅูุชุฑูุช ูู ุฃู ุฌูุงุฒ ูู ุงูุนุงูู ุจุงุณุชุฎุฏุงู Supabase. ุงููุธุงู ูุชุถูู:

- โ ุชุดููุฑ ุขูู ููููุงุช ุงููุฑูุฑ
- โ ุฅุฏุงุฑุฉ ุฌูุณุงุช ูุญุณูุฉ
- โ ูุงุฌูุฉ ูุณุชุฎุฏู ุนุฑุจูุฉ
- โ ุฏุนู ูุชุนุฏุฏ ุงููุณุชุฎุฏููู
- โ ุชุณุฌูู ุงูุนูููุงุช

## ุงูุฎุทูุงุช ุงููุทููุจุฉ

### 1. ุชุญุฏูุซ ูุงุนุฏุฉ ุงูุจูุงูุงุช ูู Supabase

#### ุฃ. ุงูุฏุฎูู ุฅูู Supabase
1. ุงุฐูุจ ุฅูู [supabase.com](https://supabase.com)
2. ุณุฌู ุงูุฏุฎูู ุฅูู ุญุณุงุจู
3. ุงุฎุชุฑ ูุดุฑูุนู

#### ุจ. ุชุดุบูู SQL Script
1. ุงุฐูุจ ุฅูู **"SQL Editor"**
2. ุงูุณุฎ ูุงูุตู ูุญุชูู ููู `scripts/final-admin-setup.sql`
3. ุงุถุบุท ุนูู **"Run"**

### 2. ูุนูููุงุช ุชุณุฌูู ุงูุฏุฎูู

ุจุนุฏ ุชุดุบูู ุงูุณูุฑูุจุชุ ููููู ุชุณุฌูู ุงูุฏุฎูู ุจุงุณุชุฎุฏุงู:

| ุงูุจุฑูุฏ ุงูุฅููุชุฑููู | ูููุฉ ุงููุฑูุฑ | ุงูุงุณู |
|------------------|-------------|-------|
| qeahmedalkawthar@gmail.com | qe203582 | ุฃุญูุฏ ุงููุญุทุงูู |
| dg@alkawthar.org.sa | dg206582 | ูุฏูุฑ ุนุงู |
| Dm@alkawthar.org.sa | dm206582 | ูุฏูุฑ ุงููุธุงู |
| admin@alkawthar.org.sa | admin123 | ูุฏูุฑ ุฅุถุงูู |
| admin@example.com | admin123 | ูุฏูุฑ ุชุฌุฑูุจู |

### 3. ุงุฎุชุจุงุฑ ุงููุธุงู

#### ุฃ. ุชุดุบูู ุงูุชุทุจูู
```bash
npm run dev
```

#### ุจ. ุงุฎุชุจุงุฑ ุชุณุฌูู ุงูุฏุฎูู
1. ุงุฐูุจ ุฅูู `/admin`
2. ุงุณุชุฎุฏู ุฃู ูู ุงูุญุณุงุจุงุช ุฃุนูุงู
3. ุชุฃูุฏ ูู ูุฌุงุญ ุชุณุฌูู ุงูุฏุฎูู

## ุงูููุฒุงุช ุงูุฌุฏูุฏุฉ

### 1. ูุธุงู ูุตุงุฏูุฉ ุขูู
- **ุชุดููุฑ ูููุงุช ุงููุฑูุฑ**: ุงุณุชุฎุฏุงู PBKDF2 ูุน salt ุนุดูุงุฆู
- **ุฌูุณุงุช ุขููุฉ**: ุงูุชูุงุก ุตูุงุญูุฉ ุชููุงุฆู ุจุนุฏ 24 ุณุงุนุฉ
- **ุญูุงูุฉ ูู ุงููุฌูุงุช**: ููุงููุฉ ููุฌูุงุช ุงูููุฉ ุงูุบุงุดูุฉ

### 2. ุฅุฏุงุฑุฉ ุงููุณุชุฎุฏููู
- **ุฅุถุงูุฉ ูุณุชุฎุฏููู ุฌุฏุฏ**: ูู ุฎูุงู ูุงุฌูุฉ ุงูุฅุฏุงุฑุฉ
- **ุชุนุฏูู ุงูุตูุงุญูุงุช**: ุฅุฏุงุฑุฉ ุงูุฃุฏูุงุฑ ูุงูุตูุงุญูุงุช
- **ุชุณุฌูู ุงูุนูููุงุช**: ุชุชุจุน ุฌููุน ุฃูุดุทุฉ ุงููุณุชุฎุฏููู

### 3. ูุงุฌูุฉ ูุณุชุฎุฏู ูุญุณูุฉ
- **ุฑุณุงุฆู ูุงุถุญุฉ**: ุจุงููุบุฉ ุงูุนุฑุจูุฉ
- **ุชุญููู ุณูุณ**: ูุคุดุฑุงุช ุชุญููู ูุงุถุญุฉ
- **ุงุณุชุฌุงุจุฉ ุณุฑูุนุฉ**: ูุงุฌูุฉ ุชูุงุนููุฉ

## ุงููููุงุช ุงููุญุฏุซุฉ

### 1. `lib/admin-auth.ts` (ุฌุฏูุฏ)
- ูุธุงู ูุตุงุฏูุฉ ูุชูุงูู ูุน Supabase
- ุฅุฏุงุฑุฉ ุงูุฌูุณุงุช ูุงูุตูุงุญูุงุช
- ุชุดููุฑ ุขูู ููููุงุช ุงููุฑูุฑ

### 2. `lib/password-utils.ts` (ุฌุฏูุฏ)
- ุฃุฏูุงุช ุชุดููุฑ ูููุงุช ุงููุฑูุฑ
- ุงูุชุญูู ูู ุตุญุฉ ูููุงุช ุงููุฑูุฑ
- ุชูููุฏ ูููุงุช ูุฑูุฑ ุนุดูุงุฆูุฉ

### 3. `components/admin-auth-guard.tsx` (ูุญุฏุซ)
- ุงุณุชุฎุฏุงู ุงููุธุงู ุงูุฌุฏูุฏ
- ูุงุฌูุฉ ูุณุชุฎุฏู ูุญุณูุฉ
- ุฑุณุงุฆู ุฎุทุฃ ูุงุถุญุฉ

### 4. `supabase-schema.sql` (ูุญุฏุซ)
- ุฅุถุงูุฉ `password_hash` ููุฌุฏูู
- ุชุญุฏูุซ RLS policies
- ุฅุนุฏุงุฏุงุช ุฃูุงู ูุญุณูุฉ

## ุงูุฃูุงู

### 1. ุชุดููุฑ ูููุงุช ุงููุฑูุฑ
```typescript
// ูู ูููุฉ ูุฑูุฑ ูุดูุฑุฉ ุจุงุณุชุฎุฏุงู:
// - Salt ุนุดูุงุฆู 16 ุจุงูุช
// - PBKDF2 ูุน 1000 iteration
// - SHA-512 hash
```

### 2. ุญูุงูุฉ ุงูุฌูุณุงุช
- **ุงูุชูุงุก ุตูุงุญูุฉ ุชููุงุฆู**: 24 ุณุงุนุฉ
- **ุชุญุฏูุซ ุชููุงุฆู**: ูู 5 ุฏูุงุฆู
- **ุชุณุฌูู ุฎุฑูุฌ ุขูู**: ูุณุญ ุฌููุน ุงูุจูุงูุงุช

### 3. ุญูุงูุฉ ูุงุนุฏุฉ ุงูุจูุงูุงุช
- **RLS Policies**: ุญูุงูุฉ ุนูู ูุณุชูู ุงูุตููู
- **ุตูุงุญูุงุช ูุญุฏูุฏุฉ**: ูุตูู ุขูู ููุจูุงูุงุช
- **ุชุณุฌูู ุงูุนูููุงุช**: ุชุชุจุน ุฌููุน ุงูุฃูุดุทุฉ

## ุงุณุชูุดุงู ุงูุฃุฎุทุงุก

### ุฅุฐุง ูู ูุนูู ุชุณุฌูู ุงูุฏุฎูู:

1. **ุชุฃูุฏ ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช**
   - ุชุญูู ูู ุชุดุบูู ุงูุณูุฑูุจุช ุจูุฌุงุญ
   - ุชุฃูุฏ ูู ูุฌูุฏ ุงูุจูุงูุงุช ูู ุฌุฏูู `admin_users`

2. **ุชุฃูุฏ ูู ุงูุงุชุตุงู**
   - ุชุญูู ูู ุฅุนุฏุงุฏุงุช Supabase
   - ุชุฃูุฏ ูู ุตุญุฉ URL ู API Key

3. **ุชุญูู ูู ูุญุฏุฉ ุงูุชุญูู**
   - ุงูุชุญ Developer Tools (F12)
   - ุงุจุญุซ ุนู ุฃุฎุทุงุก JavaScript
   - ุชุญูู ูู ุฑุณุงุฆู ุงูุดุจูุฉ

4. **ุชุฃูุฏ ูู ุงูุจูุงูุงุช**
   - ุงุณุชุฎุฏู ุงูุจุฑูุฏ ุงูุฅููุชุฑููู ููููุฉ ุงููุฑูุฑ ุจุงูุถุจุท
   - ุชุฃูุฏ ูู ุนุฏู ูุฌูุฏ ูุณุงูุงุช ุฅุถุงููุฉ

## ุฅุถุงูุฉ ูุณุชุฎุฏููู ุฌุฏุฏ

### ูู ุฎูุงู ุงูููุฏ:
```typescript
const result = await AdminAuthService.createAdminUser({
  email: 'newuser@example.com',
  name: 'ูุณุชุฎุฏู ุฌุฏูุฏ',
  password: 'password123',
  role: 'admin'
});
```

### ูู ุฎูุงู ูุงุนุฏุฉ ุงูุจูุงูุงุช:
```sql
INSERT INTO admin_users (email, name, password_hash, role, is_active) 
VALUES ('newuser@example.com', 'ูุณุชุฎุฏู ุฌุฏูุฏ', 'hashed_password', 'admin', true);
```

## ุงูุฏุนู

ูููุณุงุนุฏุฉ ุงูุชูููุฉ:
1. ุฑุงุฌุน ูุฐุง ุงูุฏููู ุฃููุงู
2. ุชุญูู ูู ูุญุฏุฉ ุงูุชุญูู ููุฃุฎุทุงุก
3. ุชุฃูุฏ ูู ุฅุนุฏุงุฏุงุช Supabase
4. ุงุชุตู ุจุงููุทูุฑ ุฅุฐุง ูุฒู ุงูุฃูุฑ

---

**ุงููุธุงู ุฌุงูุฒ ููุงุณุชุฎุฏุงู ุนุจุฑ ุงูุฅูุชุฑูุช!** ๐




